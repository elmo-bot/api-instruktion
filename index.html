<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>API – Interaktiv förklaring</title>
  <link rel="stylesheet" href="src/styles.css" />
</head>
<body>
  <main class="app" id="app" aria-label="Interaktiv API-förklaring">

    <header class="header">
      <div class="brand">
        <img src="assets/loggatransparant.png" alt="Företagslogga" />
      </div>

      <div class="controls">
        <select id="reqSelect" class="select" aria-label="Välj förfrågan">
          <option value="burger">Hamburgare • GET /menu/items/42</option>
          <option value="uber">Beställ resa • POST /rides</option>
          <option value="login">Bokningar • GET /bookings (auth)</option>
        </select>

        <button class="btn primary" id="toggleRun">Start</button>

        <div class="speed">
          <span>Tempo</span>
          <input id="speed" type="range" min="0.7" max="1.6" step="0.1" value="1.0" />
        </div>

        <button class="btn" id="reset">Reset</button>
      </div>
    </header>

    <section class="scene" aria-label="Scen">
      <div class="stage" id="stage">

        <!-- Puls-layer -->
        <svg class="pulseLayer" id="pulseLayer" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
          <defs>
            <filter id="softGlow">
              <feGaussianBlur stdDeviation="1.1" result="blur" />
              <feMerge>
                <feMergeNode in="blur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- Baslinjer (svagt) -->
          <path class="wire" d="M20 26 C38 26 44 38 50 42" />
          <path class="wire" d="M20 68 C38 68 44 54 50 50" />
          <path class="wire" d="M50 42 C58 42 64 26 80 26" />
          <path class="wire" d="M50 50 C58 50 64 68 80 68" />

          <!-- Geometri (osynlig, används för pulser) -->
          <path class="geom" id="g-guest-api"  d="M20 26 C38 26 44 38 50 42" />
          <path class="geom" id="g-menu-api"   d="M20 68 C38 68 44 54 50 50" />
          <path class="geom" id="g-api-server" d="M50 42 C58 42 64 26 80 26" />
          <path class="geom" id="g-server-api" d="M80 26 C64 26 58 42 50 42" />
          <path class="geom" id="g-api-data"   d="M50 50 C58 50 64 68 80 68" />
          <path class="geom" id="g-data-api"   d="M80 68 C64 68 58 50 50 50" />
          <path class="geom" id="g-api-guest"  d="M50 42 C44 38 38 26 20 26" />
        </svg>

        <!-- Diskret barrier (visas bara under server-interaktion) -->
        <div class="barrier" id="barrier" aria-hidden="true">
          <div class="barline"></div>
        </div>

        <!-- Noder -->
        <button class="node" data-node="guest" type="button">
          <div class="nodeTitle">Gästen</div>
          <div class="nodeSub">Input</div>
        </button>

        <button class="node" data-node="menu" type="button">
          <div class="nodeTitle">Meny</div>
          <div class="nodeSub">UI</div>
        </button>

        <button class="node wide" data-node="api" type="button">
          <div class="nodeTitle">API</div>
          <div class="nodeSub">Mellanhand</div>
        </button>

        <button class="node" data-node="server" type="button">
          <div class="nodeTitle">Server</div>
          <div class="nodeSub">Backend</div>
        </button>

        <button class="node" data-node="data" type="button">
          <div class="nodeTitle">Svar</div>
          <div class="nodeSub">Data</div>
        </button>

      </div>
    </section>

    <footer class="tech">
      <div class="kv"><span>Method</span><b id="tMethod">GET</b></div>
      <div class="kv"><span>Endpoint</span><b id="tEndpoint">/menu/items/42</b></div>
      <div class="kv"><span>Result</span><b id="tResponse">200 OK</b></div>
    </footer>

  </main>

  <script src="src/app.js"></script>
</body>
</html>
