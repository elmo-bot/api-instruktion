<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API – superenkelt</title>
    <link rel="stylesheet" href="./src/styles.css" />
  </head>
  <body>
    <div class="bg"></div>

    <header class="topbar">
      <div class="brand">
        <img class="logo" src="./assets/loggatransparant.png" alt="Logo" />
        <div>
          <div class="brandTitle">API – superenkelt</div>
          <div class="brandSub">Se hur en “fråga” går fram och tillbaka</div>
        </div>
      </div>
    </header>

    <main class="wrap">
      <section class="hero">
        <h1>Välj ett exempel och tryck <span class="pill">Nästa</span></h1>
        <p class="muted">
          Tänk så här: <strong>Appen frågar</strong> → <strong>API skickar vidare</strong> →
          <strong>Servern fixar</strong> → <strong>Databasen hämtar/sparar</strong> → svar tillbaka.
        </p>
      </section>

      <section class="layout">
        <section class="left">
          <div class="card">
            <div class="label">Exempel</div>

            <div class="segmented" role="tablist" aria-label="Exempel">
              <button class="segBtn isActive" data-scenario="look" aria-selected="true">
                Titta på meny
                <span class="tech">GET</span>
              </button>
              <button class="segBtn" data-scenario="order" aria-selected="false">
                Skicka beställning
                <span class="tech">POST</span>
              </button>
              <button class="segBtn" data-scenario="edit" aria-selected="false">
                Ändra profil
                <span class="tech">PUT</span>
              </button>
              <button class="segBtn" data-scenario="remove" aria-selected="false">
                Ta bort order
                <span class="tech">DELETE</span>
              </button>
            </div>

            <div class="kv">
              <div class="kvRow">
                <div class="kvKey">Tekniskt namn</div>
                <div class="kvVal" id="methodVal">GET</div>
              </div>
              <div class="kvRow">
                <div class="kvKey">Exempel-adress</div>
                <div class="kvVal" id="endpointVal">/menu/items/42</div>
              </div>
              <div class="kvRow">
                <div class="kvKey">Status</div>
                <div class="kvVal" id="statusVal">—</div>
              </div>
            </div>

            <div class="stepper">
              <div class="dots" id="dots" aria-label="Stegindikator"></div>
              <div class="stepText">Steg <span id="stepNow">0</span>/<span id="stepTotal">7</span></div>
            </div>

            <div class="actions">
              <button class="btn secondary" id="resetBtn" type="button">Återställ</button>
              <button class="btn" id="nextBtn" type="button">Nästa</button>
            </div>
          </div>

          <div class="card info" aria-live="polite">
            <div class="infoTitle">Vad händer?</div>
            <div class="infoBody" id="explainText">Välj ett exempel och tryck Nästa.</div>

            <div class="legend">
              <span class="dot request"></span> Fråga (request)
              <span class="dot response"></span> Svar (response)
            </div>
          </div>
        </section>

        <section class="right">
          <div class="card vizCard">
            <div class="vizHeader">
              <div>
                <div class="vizTitle">Kedjan</div>
                <div class="vizSub">App → API → Server → Databas → tillbaka</div>
              </div>
            </div>

            <div class="viz" id="viz">
              <!-- Noder -->
              <div class="node node-app" id="nodeApp">
                <div class="nodeTitle">App</div>
                <div class="nodeSub">Användaren trycker</div>
              </div>

              <div class="node node-api" id="nodeApi">
                <div class="nodeTitle">API</div>
                <div class="nodeSub">Mellanhanden</div>
              </div>

              <div class="node node-server" id="nodeServer">
                <div class="nodeTitle">Server</div>
                <div class="nodeSub">Gör jobbet</div>
              </div>

              <div class="node node-db" id="nodeDb">
                <div class="nodeTitle">Databas</div>
                <div class="nodeSub">Sparar / hämtar data</div>
              </div>

              <!-- Linjer + puls (SVG) -->
              <svg class="wires" viewBox="0 0 1000 560" preserveAspectRatio="none" aria-hidden="true">
                <defs>
                  <filter id="glow">
                    <feGaussianBlur stdDeviation="3" result="b" />
                    <feMerge>
                      <feMergeNode in="b" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>

                <!-- Statiska “vägar” -->
                <path id="path_app_api" class="wire" d="M165 140 C 260 140, 300 210, 410 250" />
                <path id="path_api_server" class="wire" d="M500 250 C 590 230, 640 170, 720 140" />
                <path id="path_server_db" class="wire" d="M790 165 C 820 270, 720 390, 520 430" />
                <path id="path_db_api" class="wire" d="M480 430 C 300 400, 280 320, 450 260" />
                <path id="path_api_app" class="wire" d="M420 250 C 300 210, 260 140, 165 140" />

                <!-- Puls-prickar (flyttas med JS) -->
                <circle id="pulseRequest" class="pulseDot request" r="7" cx="-20" cy="-20" />
                <circle id="pulseResponse" class="pulseDot response" r="7" cx="-20" cy="-20" />
              </svg>
            </div>
          </div>
        </section>
      </section>

      <footer class="footer">
        Tips: prova olika exempel – du ser att “API” alltid är mellanhanden som skickar vidare och tillbaka.
      </footer>
    </main>

    <script src="./src/app.js"></script>
  </body>
</html>
