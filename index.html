<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>API – restaurangmetaforen</title>
  <link rel="stylesheet" href="src/styles.css" />
</head>
<body>
  <main class="reel" id="reel" aria-label="Interaktiv API-metafor (9:16)">

    <!-- Top bar -->
    <header class="top">
      <div class="left">
        <div class="badge">API • restaurangmetaforen</div>
        <h1 id="headline">Klicka runt: tydliga pulser</h1>
        <p id="subhead">Välj en ruta → se en puls gå exakt dit den ska. Slå på Presenter Mode om du vill styra pulserna stegvis.</p>
      </div>

      <div class="right">
        <button class="btn primary" id="toggleMode" title="Interaktivt eller Fokus">Fokus</button>
        <button class="btn" id="presenterBtn" title="Klicka för att trigga nästa puls i sekvensen">Presenter</button>
        <button class="btn" id="filmMode" title="Göm UI för ren inspelning">Filmläge</button>
      </div>
    </header>

    <!-- Brand -->
    <div class="brand" title="Ditt företag">
      <img src="assets/loggatransparant.png" alt="Företagslogga" />
    </div>

    <!-- Scene -->
    <section class="scene">
      <div class="stage" id="stage">

        <!-- Pulse layer (SVG pulses + glow) -->
        <svg class="pulseLayer" id="pulseLayer" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
          <defs>
            <filter id="glow">
              <feGaussianBlur stdDeviation="1.4" result="blur" />
              <feColorMatrix in="blur" type="matrix"
                values="
                  1 0 0 0 0
                  0 1 0 0 0
                  0 0 1 0 0
                  0 0 0 0.85 0" />
              <feMerge>
                <feMergeNode />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
          </defs>

          <!-- Base geometry (same coords across pulses for perfect alignment) -->
          <!-- guest (left-top) -> api (center) -->
          <path class="path" id="p-guest-api" d="M20 26 C38 26 44 35 50 35" />
          <!-- menu (left-bottom) -> api -->
          <path class="path" id="p-menu-api" d="M20 68 C38 68 44 52 50 52" />
          <!-- api -> guest -->
          <path class="path" id="p-api-guest" d="M50 35 C44 35 38 26 20 26" />
          <!-- api -> server (right-top) -->
          <path class="path" id="p-api-server" d="M50 35 C58 35 64 26 80 26" />
          <!-- api -> data (right-bottom) -->
          <path class="path" id="p-api-data" d="M50 52 C58 52 64 68 80 68" />
          <!-- server -> api -->
          <path class="path" id="p-server-api" d="M80 26 C64 26 58 35 50 35" />
          <!-- data -> api -->
          <path class="path" id="p-data-api" d="M80 68 C64 68 58 52 50 52" />
        </svg>

        <!-- Barrier (visual only, toggled for server concept) -->
        <div class="barrier" id="barrier">
          <div class="barline"></div>
          <div class="barlabel">Ingen direktåtkomst</div>
        </div>

        <!-- Nodes -->
        <article class="node" data-node="guest" tabindex="0">
          <div class="nodeHead">
            <div class="nodeTitle">
              <span class="icon" data-ico="guest"></span>
              Gästen
            </div>
            <span class="tag green">Du</span>
          </div>
          <div class="nodeBody">Du vill ha något.</div>
        </article>

        <article class="node" data-node="menu" tabindex="0">
          <div class="nodeHead">
            <div class="nodeTitle">
              <span class="icon" data-ico="menu"></span>
              Meny
            </div>
            <span class="tag accent">App</span>
          </div>
          <div class="nodeBody">Här väljer du.</div>
        </article>

        <article class="node wide" data-node="api" tabindex="0">
          <div class="nodeHead">
            <div class="nodeTitle">
              <span class="icon" data-ico="api"></span>
              API
            </div>
            <span class="tag amber">Mellanhand</span>
          </div>
          <div class="nodeBody">Tar emot och skickar vidare.</div>
        </article>

        <article class="node" data-node="server" tabindex="0">
          <div class="nodeHead">
            <div class="nodeTitle">
              <span class="icon" data-ico="server"></span>
              Server
            </div>
            <span class="tag red">Kök</span>
          </div>
          <div class="nodeBody">Här finns datan.</div>
        </article>

        <article class="node" data-node="data" tabindex="0">
          <div class="nodeHead">
            <div class="nodeTitle">
              <span class="icon" data-ico="data"></span>
              Svar
            </div>
            <span class="tag">Data</span>
          </div>
          <div class="nodeBody">Exakt det du bad om.</div>
        </article>

      </div>
    </section>

    <!-- Bottom controls -->
    <section class="bottom">
      <div class="stepper" role="tablist" aria-label="Steg">
        <button class="step" data-step="1" role="tab">1</button>
        <button class="step" data-step="2" role="tab">2</button>
        <button class="step" data-step="3" role="tab">3</button>
        <button class="step" data-step="4" role="tab">4</button>
        <button class="step" data-step="0" role="tab">Översikt</button>
      </div>

      <div class="caption" id="caption">
        <div class="capTitle" id="capTitle">Översikt</div>
        <div class="capText" id="capText">Tryck på en ruta. Pulsen visar exakt kommunikationen.</div>
      </div>

      <div class="tools">
        <button class="btn mini" id="pulseOnce">Puls</button>
        <button class="btn mini" id="nextPulse">Nästa</button>
        <button class="btn mini" id="reset">Reset</button>
      </div>
    </section>

  </main>

  <script src="src/app.js"></script>
</body>
</html>
