<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API – enkelt förklarat</title>
    <link rel="stylesheet" href="./src/styles.css" />
  </head>
  <body>
    <div class="bg"></div>

    <header class="topbar">
      <div class="brand">
        <img class="logo" src="./assets/loggatransparant.png" alt="Logo" />
        <div class="brandText">
          <div class="brandTitle">API – enkelt</div>
          <div class="brandSub">Se hur en förfrågan går fram och tillbaka</div>
        </div>
      </div>
    </header>

    <main class="wrap">
      <section class="hero">
        <h1>Välj scenario och tryck <span class="pill">Nästa</span></h1>
        <p class="muted">
          En puls visar hur <strong>request → response</strong> rör sig.
          Ingen teknisk jargong — bara kedjan som den känns för användaren.
        </p>
      </section>

      <section class="panel">
        <div class="controls">
          <div class="controlCard">
            <div class="controlRow">
              <label class="label">Scenario</label>
              <div class="segmented" role="tablist" aria-label="Scenario">
                <button class="segBtn isActive" data-scenario="get" aria-selected="true">GET</button>
                <button class="segBtn" data-scenario="post" aria-selected="false">POST</button>
                <button class="segBtn" data-scenario="put" aria-selected="false">PUT</button>
                <button class="segBtn" data-scenario="delete" aria-selected="false">DELETE</button>
              </div>
            </div>

            <div class="kv">
              <div class="kvRow">
                <div class="kvKey">Metod</div>
                <div class="kvVal" id="methodVal">GET</div>
              </div>
              <div class="kvRow">
                <div class="kvKey">Exempel</div>
                <div class="kvVal" id="endpointVal">/menu/items/42</div>
              </div>
              <div class="kvRow">
                <div class="kvKey">Status</div>
                <div class="kvVal" id="statusVal">—</div>
              </div>
            </div>

            <div class="stepper">
              <div class="stepDots" id="dots" aria-label="Stegindikator"></div>
              <div class="stepText">
                Steg <span id="stepNow">0</span>/<span id="stepTotal">8</span>
              </div>
            </div>

            <div class="actions">
              <button class="btn secondary" id="resetBtn" type="button">Återställ</button>
              <button class="btn" id="nextBtn" type="button">Nästa</button>
            </div>
          </div>

          <div class="explainCard" aria-live="polite">
            <div class="explainTitle">Vad händer just nu?</div>
            <div class="explainBody" id="explainText">
              Välj ett scenario och tryck Nästa för att starta.
            </div>
            <div class="miniLegend">
              <span class="legendDot request"></span> Request (fråga)
              <span class="legendDot response"></span> Response (svar)
            </div>
          </div>
        </div>

        <div class="vizCard">
          <div class="vizHeader">
            <div class="vizTitle">Kedjan</div>
            <div class="vizSub">App → API → Server → Databas → tillbaka</div>
          </div>

          <div class="viz" id="viz">
            <!-- Noder -->
            <div class="node node-app" id="nodeApp">
              <div class="nodeTitle">App</div>
              <div class="nodeSub">Användaren</div>
            </div>

            <div class="node node-api" id="nodeApi">
              <div class="nodeTitle">API</div>
              <div class="nodeSub">Mellanhand</div>
            </div>

            <div class="node node-server" id="nodeServer">
              <div class="nodeTitle">Server</div>
              <div class="nodeSub">Backend</div>
            </div>

            <div class="node node-db" id="nodeDb">
              <div class="nodeTitle">Databas</div>
              <div class="nodeSub">Data</div>
            </div>

            <!-- Linjer + pulsar -->
            <svg class="wires" viewBox="0 0 1000 560" preserveAspectRatio="none" aria-hidden="true">
              <defs>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="3" result="coloredBlur" />
                  <feMerge>
                    <feMergeNode in="coloredBlur" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>
              </defs>

              <!-- APP -> API -->
              <path id="p1" class="wire" d="M165 140 C 260 140, 300 210, 410 250" />
              <!-- API -> SERVER -->
              <path id="p2" class="wire" d="M500 250 C 590 230, 640 170, 720 140" />
              <!-- SERVER -> DB -->
              <path id="p3" class="wire" d="M790 165 C 820 270, 720 390, 520 430" />
              <!-- DB -> API (response väg tillbaka) -->
              <path id="p4" class="wire" d="M480 430 C 300 400, 280 320, 450 260" />
              <!-- API -> APP (response tillbaka) -->
              <path id="p5" class="wire" d="M420 250 C 300 210, 260 140, 165 140" />

              <!-- Pulsar (skapas/aktiveras i JS genom stroke-dashoffset animation) -->
              <path id="pulseReq1" class="pulse request" d="M165 140 C 260 140, 300 210, 410 250" />
              <path id="pulseReq2" class="pulse request" d="M500 250 C 590 230, 640 170, 720 140" />
              <path id="pulseReq3" class="pulse request" d="M790 165 C 820 270, 720 390, 520 430" />

              <path id="pulseRes1" class="pulse response" d="M480 430 C 300 400, 280 320, 450 260" />
              <path id="pulseRes2" class="pulse response" d="M420 250 C 300 210, 260 140, 165 140" />
            </svg>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="footNote">
          Tips: Byt scenario och tryck Nästa igen för att se en ny resa.
        </div>
      </footer>
    </main>

    <script src="./src/app.js"></script>
  </body>
</html>
